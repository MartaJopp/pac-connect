<header ng-include="'/views/partials/header.html'"></header>

<div ng-include="'views/partials/nav.html'"></div>
<div class="container">

    <p id="pWelcome" class="lead">Logged In: {{uc.userObject.userName}}</p>
    <md-button ng-click="uc.startNewMessage($event)" ng-if="uc.userObject.user_role === 'coach'" class="md-raised md-primary">Send Message</md-button>
<md-button ng-click="uc.startCoachMessage($event)" ng-if="uc.userObject.user_role != 'coach'" class="md-raised md-primary">Send Message</md-button>



        
<table>
    <th>Date Received</th>
    <th>From</th>
    <!-- <th ng-if ="uc.userObject.user_role==='coach'">To</th> -->
    <th>Subject</th>
    <th>Message</th>
    <th>Reply</th>

    <tr ng-repeat="message in uc.allMessages.data" ng-class="'{{uc.userObject.name===message.from_name}}'">
        <td >{{message.date | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}</td>
        <td>{{message.from_name}}</td>
        <!-- <td ng-if = "uc.userObject.user_role==='coach'">{{message.to_name}}</td> -->
        <td>{{message.subject}}</td>
        <td>{{message.message}}</td>
        <td><md-button ng-click="uc.reply($event, message.conversation_id, message.subject, message.from_user_id)" id="replyButton" class="md-raised md-primary">Reply</md-button></td>
</tr>
</table>


</div>
